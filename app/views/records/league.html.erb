<% content_for :jumbotron do %>
  <div class='jumbotron jumbotron-small' style='--jumbotron-background: url("/images/records.jpg") center center/cover'>
  </div>
<% end %>

<h1>Seuraennätykset</h1>

<div class='grid athletes'>
  <aside class='col-1-4 aside'>
    <% Record::LEAGUES_BY_GENDER.each do |gender, leagues| %>
      <h3 data-dropdown-id='<%= "#{gender}-dropdown" %>' class='dropdown-button'><%= gender %></h3>
      <div id='<%= "#{gender}-dropdown" %>' class='dropdown'>
        <%= render partial: 'leagues_list', locals: { leagues: leagues }  %>
      </div>
    <% end %>
  </aside>

  
  <section class='col-4-13'>
    <h2><%= @league %></h2>
    <div class="table-wrapper">
      <table class='table'>
        <thead>
          <tr>
            <th>Laji</th>
            <th>Urheilija</th>
            <th>Tulos</th>
            <th>Paikkakunta</th>
            <th>Päivämäärä</th>
          </tr>
        </thead>
        <tbody>
          <% Record::DISCIPLINES_BY_LEAGUE[@league].each do |discipline| %>
            <% @records[discipline].each_with_index do |record, idx| %>
              <tr class="<%= 'recent' if record.achieved_at > 1.year.ago %>">
                <% if idx == 0 %>
                  <td rowspan="<%= @records[discipline].length %>"><%= discipline %></td>
                <% end %>
                <td><%= record.athlete %></td>
                <td><%= record.result %></td>
                <td><%= record.location %></td>
                <td><%= record.achieved_at.day == 1 && record.achieved_at.month == 1 ? record.achieved_at.year : l(record.achieved_at) %></td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </section>
</div>
